<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelas Saya - Sistem Kelas Online</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/dashboard.css">
</head>
<body>
    <div class="dashboard-wrapper">
        <!-- Sidebar (same as dashboard) -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="../pages/index.html" class="sidebar-brand">
                    <span class="sidebar-logo">ğŸ“š</span>
                    <span>KelasOnline</span>
                </a>
            </div>
            <nav class="sidebar-menu">
                <div class="sidebar-menu-section">
                    <div class="sidebar-menu-title">Menu Utama</div>
                    <ul class="sidebar-menu-list">
                        <li class="sidebar-menu-item">
                            <a href="dashboard-mahasiswa.html" class="sidebar-menu-link">
                                <span class="sidebar-menu-icon">ğŸ </span>
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <li class="sidebar-menu-item">
                            <a href="kelas-mahasiswa.html" class="sidebar-menu-link active">
                                <span class="sidebar-menu-icon">ğŸ“š</span>
                                <span>Kelas Saya</span>
                            </a>
                        </li>
                        <li class="sidebar-menu-item">
                            <a href="#" class="sidebar-menu-link">
                                <span class="sidebar-menu-icon">ğŸ“</span>
                                <span>Tugas</span>
                            </a>
                        </li>
                        <li class="sidebar-menu-item">
                            <a href="#" class="sidebar-menu-link">
                                <span class="sidebar-menu-icon">ğŸ“Š</span>
                                <span>Nilai</span>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="sidebar-menu-section">
                    <div class="sidebar-menu-title">Lainnya</div>
                    <ul class="sidebar-menu-list">
                        <li class="sidebar-menu-item">
                            <a href="profil-mahasiswa.html" class="sidebar-menu-link">
                                <span class="sidebar-menu-icon">ğŸ‘¤</span>
                                <span>Profil</span>
                            </a>
                        </li>
                        <li class="sidebar-menu-item">
                            <a href="#" class="sidebar-menu-link">
                                <span class="sidebar-menu-icon">âš™ï¸</span>
                                <span>Pengaturan</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
            <div class="sidebar-footer">
                <div class="sidebar-user">
                    <div class="sidebar-user-avatar">JD</div>
                    <div class="sidebar-user-info">
                        <div class="sidebar-user-name">John Doe</div>
                        <div class="sidebar-user-role">Mahasiswa</div>
                    </div>
                </div>
                <button class="btn btn-danger btn-block btn-sm" onclick="logout()" style="margin-top: 1rem;">Logout</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <div class="dashboard-topbar">
                <div class="topbar-left">
                    <button class="topbar-toggle" id="sidebarToggle">
                        <span></span><span></span><span></span>
                    </button>
                    <h1 class="topbar-title">Kelas Saya</h1>
                </div>
                <div class="topbar-right">
                    <div class="topbar-notification">ğŸ””<span class="notification-badge">3</span></div>
                    <div class="topbar-profile">
                        <div class="topbar-avatar">JD</div>
                        <span>John Doe</span>
                    </div>
                </div>
            </div>

            <div class="dashboard-content">
                <!-- Join Class Section -->
                <div class="content-section">
                    <h3>ğŸ“ Bergabung dengan Kelas Baru</h3>
                    <p class="text-gray mb-3">Masukkan kode kelas yang diberikan oleh dosen untuk bergabung</p>
                    
                    <div id="alertContainer"></div>
                    
                    <form id="joinClassForm" style="max-width: 500px;">
                        <div class="form-inline">
                            <div class="form-group" style="flex: 2;">
                                <input 
                                    type="text" 
                                    id="classCode" 
                                    class="form-input" 
                                    placeholder="Masukkan kode kelas (contoh: WEB2025)"
                                    style="text-transform: uppercase;"
                                    required
                                >
                                <div class="form-error" id="classCodeError">Kode kelas tidak valid</div>
                            </div>
                            <button type="submit" class="btn btn-primary" id="joinBtn">
                                Join Kelas
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Search & Filter -->
                <div class="content-section">
                    <div class="search-bar">
                        <span class="search-icon">ğŸ”</span>
                        <input 
                            type="text" 
                            class="search-input" 
                            id="searchInput"
                            placeholder="Cari kelas..."
                        >
                        <button class="search-clear" id="searchClear">âœ•</button>
                    </div>
                </div>

                <!-- My Classes -->
                <div class="content-section">
                    <div class="section-header">
                        <h3 class="section-title">ğŸ“š Daftar Kelas yang Diikuti</h3>
                        <span class="badge badge-primary">5 Kelas</span>
                    </div>

                    <div class="class-grid" id="classGrid">
                        <!-- Class Card 1 -->
                        <div class="class-card" data-class-name="Pemrograman Web">
                            <div class="class-card-image">ğŸ’»</div>
                            <div class="class-card-body">
                                <h4 class="class-card-title">Pemrograman Web</h4>
                                <span class="class-card-code">KODE: WEB2025</span>
                                <p class="class-card-description">
                                    Mempelajari dasar-dasar pemrograman web menggunakan HTML, CSS, JavaScript, dan PHP.
                                </p>
                                <div class="class-card-footer">
                                    <div class="class-card-meta">
                                        <span>ğŸ‘¨â€ğŸ« Prof. Ahmad</span>
                                        <span>ğŸ“ 3 Tugas</span>
                                    </div>
                                </div>
                                <a href="detail-kelas-mahasiswa.html" class="btn btn-primary btn-block btn-sm" style="margin-top: 1rem;">
                                    Lihat Kelas
                                </a>
                            </div>
                        </div>

                        <!-- Class Card 2 -->
                        <div class="class-card" data-class-name="Basis Data">
                            <div class="class-card-image" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%);">ğŸ—„ï¸</div>
                            <div class="class-card-body">
                                <h4 class="class-card-title">Basis Data</h4>
                                <span class="class-card-code">KODE: DB2025</span>
                                <p class="class-card-description">
                                    Konsep dasar database, SQL, normalisasi, dan implementasi sistem basis data.
                                </p>
                                <div class="class-card-footer">
                                    <div class="class-card-meta">
                                        <span>ğŸ‘¨â€ğŸ« Dr. Budi</span>
                                        <span>ğŸ“ 2 Tugas</span>
                                    </div>
                                </div>
                                <a href="detail-kelas-mahasiswa.html" class="btn btn-primary btn-block btn-sm" style="margin-top: 1rem;">
                                    Lihat Kelas
                                </a>
                            </div>
                        </div>

                        <!-- Class Card 3 -->
                        <div class="class-card" data-class-name="Sistem Operasi">
                            <div class="class-card-image" style="background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);">ğŸ–¥ï¸</div>
                            <div class="class-card-body">
                                <h4 class="class-card-title">Sistem Operasi</h4>
                                <span class="class-card-code">KODE: OS2025</span>
                                <p class="class-card-description">
                                    Prinsip kerja sistem operasi, manajemen proses, memori, dan file system.
                                </p>
                                <div class="class-card-footer">
                                    <div class="class-card-meta">
                                        <span>ğŸ‘¨â€ğŸ« Ir. Cindy</span>
                                        <span>ğŸ“ 1 Tugas</span>
                                    </div>
                                </div>
                                <a href="detail-kelas-mahasiswa.html" class="btn btn-primary btn-block btn-sm" style="margin-top: 1rem;">
                                    Lihat Kelas
                                </a>
                            </div>
                        </div>

                        <!-- Class Card 4 -->
                        <div class="class-card" data-class-name="Algoritma dan Struktur Data">
                            <div class="class-card-image" style="background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);">ğŸ”¢</div>
                            <div class="class-card-body">
                                <h4 class="class-card-title">Algoritma dan Struktur Data</h4>
                                <span class="class-card-code">KODE: ALG2025</span>
                                <p class="class-card-description">
                                    Mempelajari berbagai algoritma, kompleksitas, dan struktur data fundamental.
                                </p>
                                <div class="class-card-footer">
                                    <div class="class-card-meta">
                                        <span>ğŸ‘¨â€ğŸ« Dr. Surya</span>
                                        <span>ğŸ“ 4 Tugas</span>
                                    </div>
                                </div>
                                <a href="detail-kelas-mahasiswa.html" class="btn btn-primary btn-block btn-sm" style="margin-top: 1rem;">
                                    Lihat Kelas
                                </a>
                            </div>
                        </div>

                        <!-- Class Card 5 -->
                        <div class="class-card" data-class-name="Jaringan Komputer">
                            <div class="class-card-image" style="background: linear-gradient(135deg, #EC4899 0%, #DB2777 100%);">ğŸŒ</div>
                            <div class="class-card-body">
                                <h4 class="class-card-title">Jaringan Komputer</h4>
                                <span class="class-card-code">KODE: NET2025</span>
                                <p class="class-card-description">
                                    Konsep dasar jaringan, protokol TCP/IP, routing, dan keamanan jaringan.
                                </p>
                                <div class="class-card-footer">
                                    <div class="class-card-meta">
                                        <span>ğŸ‘¨â€ğŸ« Prof. Juan</span>
                                        <span>ğŸ“ 2 Tugas</span>
                                    </div>
                                </div>
                                <a href="detail-kelas-mahasiswa.html" class="btn btn-primary btn-block btn-sm" style="margin-top: 1rem;">
                                    Lihat Kelas
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Empty State (hidden by default) -->
                    <div class="empty-state" id="emptyState" style="display: none;">
                        <div class="empty-state-icon">ğŸ“š</div>
                        <h3 class="empty-state-title">Tidak ada kelas ditemukan</h3>
                        <p class="empty-state-text">Coba ubah kata kunci pencarian Anda</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p>Memproses...</p>
    </div>

    <script src="../assets/js/validation.js"></script>
    <script src="../assets/js/ui-interactions.js"></script>
    <script>
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('sidebar');
        const joinClassForm = document.getElementById('joinClassForm');
        const classCodeInput = document.getElementById('classCode');
        const searchInput = document.getElementById('searchInput');
        const classGrid = document.getElementById('classGrid');
        const emptyState = document.getElementById('emptyState');
        const alertContainer = document.getElementById('alertContainer');

        // Sidebar toggle
        sidebarToggle.addEventListener('click', function() {
            sidebar.classList.toggle('active');
        });

        // Join class form
        joinClassForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const code = classCodeInput.value.trim().toUpperCase();
            
            if (!validateClassCode(code, 'classCodeError')) {
                return;
            }
            
            document.getElementById('loadingOverlay').classList.add('show');
            
            // Simulate API call
            setTimeout(() => {
                document.getElementById('loadingOverlay').classList.remove('show');
                
                // Success
                alertContainer.innerHTML = `
                    <div class="alert alert-success">
                        âœ“ Berhasil join kelas dengan kode ${code}!
                    </div>
                `;
                
                classCodeInput.value = '';
                
                // INTEGRATION NOTE for Juan:
                // Replace with actual backend call
                /*
                fetch('../backend/kelas/join.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ kode_kelas: code })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alertContainer.innerHTML = `<div class="alert alert-success">âœ“ ${data.message}</div>`;
                        setTimeout(() => location.reload(), 1500);
                    } else {
                        alertContainer.innerHTML = `<div class="alert alert-error">âœ• ${data.message}</div>`;
                    }
                });
                */
            }, 1000);
        });

        // Search functionality
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const classCards = classGrid.querySelectorAll('.class-card');
            let visibleCount = 0;
            
            classCards.forEach(card => {
                const className = card.getAttribute('data-class-name').toLowerCase();
                if (className.includes(searchTerm)) {
                    card.style.display = '';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            if (visibleCount === 0) {
                classGrid.style.display = 'none';
                emptyState.style.display = 'block';
            } else {
                classGrid.style.display = 'grid';
                emptyState.style.display = 'none';
            }
        });

        function logout() {
            if (confirm('Apakah Anda yakin ingin logout?')) {
                window.location.href = '../pages/login.html';
            }
        }
    </script>
</body>
</html>

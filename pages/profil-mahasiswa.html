<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil - Sistem Kelas Online</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/dashboard.css">
    <link rel="stylesheet" href="../assets/css/forms.css">
</head>
<body>
    <div class="dashboard-wrapper">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="../pages/index.html" class="sidebar-brand">
                    <span class="sidebar-logo">üìö</span>
                    <span>KelasOnline</span>
                </a>
            </div>
            <nav class="sidebar-menu">
                <div class="sidebar-menu-section">
                    <div class="sidebar-menu-title">Menu Utama</div>
                    <ul class="sidebar-menu-list">
                        <li class="sidebar-menu-item">
                            <a href="dashboard-mahasiswa.html" class="sidebar-menu-link">
                                <span class="sidebar-menu-icon">üè†</span>
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <li class="sidebar-menu-item">
                            <a href="kelas-mahasiswa.html" class="sidebar-menu-link">
                                <span class="sidebar-menu-icon">üìö</span>
                                <span>Kelas Saya</span>
                            </a>
                        </li>
                        <li class="sidebar-menu-item">
                            <a href="#" class="sidebar-menu-link">
                                <span class="sidebar-menu-icon">üìù</span>
                                <span>Tugas</span>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="sidebar-menu-section">
                    <div class="sidebar-menu-title">Lainnya</div>
                    <ul class="sidebar-menu-list">
                        <li class="sidebar-menu-item">
                            <a href="profil-mahasiswa.html" class="sidebar-menu-link active">
                                <span class="sidebar-menu-icon">üë§</span>
                                <span>Profil</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
            <div class="sidebar-footer">
                <div class="sidebar-user">
                    <div class="sidebar-user-avatar">JD</div>
                    <div class="sidebar-user-info">
                        <div class="sidebar-user-name">John Doe</div>
                        <div class="sidebar-user-role">Mahasiswa</div>
                    </div>
                </div>
                <button class="btn btn-danger btn-block btn-sm" onclick="logout()" style="margin-top: 1rem;">Logout</button>
            </div>
        </aside>

        <main class="dashboard-main">
            <div class="dashboard-topbar">
                <div class="topbar-left">
                    <button class="topbar-toggle" id="sidebarToggle">
                        <span></span><span></span><span></span>
                    </button>
                    <h1 class="topbar-title">Profil Saya</h1>
                </div>
                <div class="topbar-right">
                    <div class="topbar-notification">üîî<span class="notification-badge">3</span></div>
                    <div class="topbar-profile">
                        <div class="topbar-avatar">JD</div>
                        <span>John Doe</span>
                    </div>
                </div>
            </div>

            <div class="dashboard-content">
                <!-- Profile Header -->
                <div class="content-section">
                    <div style="display: flex; align-items: center; gap: 2rem;">
                        <div style="width: 120px; height: 120px; background: var(--primary-color); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 3rem; font-weight: 700;">
                            JD
                        </div>
                        <div>
                            <h2 style="margin-bottom: 0.5rem;">John Doe</h2>
                            <p class="text-gray" style="margin-bottom: 0.5rem;">üìß john.doe@email.com</p>
                            <span class="badge badge-primary">üéì Mahasiswa</span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <!-- Edit Profile Form -->
                    <div class="col-md-8">
                        <div class="content-section">
                            <h3 class="mb-3">üìù Edit Profil</h3>

                            <div id="alertContainer"></div>

                            <form id="profileForm">
                                <div class="form-group">
                                    <label for="nama" class="form-label">Nama Lengkap</label>
                                    <input 
                                        type="text" 
                                        id="nama" 
                                        class="form-input" 
                                        value="John Doe"
                                        required
                                    >
                                </div>

                                <div class="form-group">
                                    <label for="email" class="form-label">Email</label>
                                    <input 
                                        type="email" 
                                        id="email" 
                                        class="form-input" 
                                        value="john.doe@email.com"
                                        required
                                    >
                                    <div class="form-help">Email digunakan untuk login</div>
                                </div>

                                <div class="form-group">
                                    <label for="nim" class="form-label">NIM</label>
                                    <input 
                                        type="text" 
                                        id="nim" 
                                        class="form-input" 
                                        value="20250001"
                                    >
                                </div>

                                <div class="form-group">
                                    <label for="jurusan" class="form-label">Jurusan</label>
                                    <input 
                                        type="text" 
                                        id="jurusan" 
                                        class="form-input" 
                                        value="Teknik Informatika"
                                    >
                                </div>

                                <div class="form-group">
                                    <label for="angkatan" class="form-label">Angkatan</label>
                                    <input 
                                        type="text" 
                                        id="angkatan" 
                                        class="form-input" 
                                        value="2025"
                                    >
                                </div>

                                <div class="form-group">
                                    <label for="telepon" class="form-label">Nomor Telepon</label>
                                    <input 
                                        type="tel" 
                                        id="telepon" 
                                        class="form-input" 
                                        value="081234567890"
                                    >
                                </div>

                                <button type="submit" class="btn btn-primary">
                                    üíæ Simpan Perubahan
                                </button>
                            </form>
                        </div>

                        <!-- Change Password -->
                        <div class="content-section">
                            <h3 class="mb-3">üîí Ubah Password</h3>

                            <div id="passwordAlertContainer"></div>

                            <form id="passwordForm" style="max-width: 500px;">
                                <div class="form-group form-group-icon">
                                    <label for="currentPassword" class="form-label">Password Saat Ini</label>
                                    <span class="form-icon">üîí</span>
                                    <input 
                                        type="password" 
                                        id="currentPassword" 
                                        class="form-input" 
                                        placeholder="Masukkan password saat ini"
                                        required
                                    >
                                </div>

                                <div class="form-group form-group-icon">
                                    <label for="newPassword" class="form-label">Password Baru</label>
                                    <span class="form-icon">üîí</span>
                                    <input 
                                        type="password" 
                                        id="newPassword" 
                                        class="form-input" 
                                        placeholder="Minimal 8 karakter"
                                        required
                                    >
                                    <div class="form-error" id="newPasswordError">Password minimal 8 karakter</div>
                                </div>

                                <div class="form-group form-group-icon">
                                    <label for="confirmNewPassword" class="form-label">Konfirmasi Password Baru</label>
                                    <span class="form-icon">üîí</span>
                                    <input 
                                        type="password" 
                                        id="confirmNewPassword" 
                                        class="form-input" 
                                        placeholder="Ulangi password baru"
                                        required
                                    >
                                    <div class="form-error" id="confirmNewPasswordError">Password tidak cocok</div>
                                </div>

                                <button type="submit" class="btn btn-primary">
                                    üîë Ubah Password
                                </button>
                            </form>
                        </div>
                    </div>

                    <!-- Stats Sidebar -->
                    <div class="col-md-4">
                        <div class="content-section">
                            <h4 class="mb-3">üìä Statistik</h4>
                            
                            <div style="display: flex; flex-direction: column; gap: 1rem;">
                                <div class="card">
                                    <div class="card-body" style="text-align: center;">
                                        <div style="font-size: 2.5rem; font-weight: 700; color: var(--primary-color); margin-bottom: 0.5rem;">
                                            5
                                        </div>
                                        <div style="color: var(--gray);">Kelas Diikuti</div>
                                    </div>
                                </div>

                                <div class="card">
                                    <div class="card-body" style="text-align: center;">
                                        <div style="font-size: 2.5rem; font-weight: 700; color: var(--secondary-color); margin-bottom: 0.5rem;">
                                            12
                                        </div>
                                        <div style="color: var(--gray);">Tugas Selesai</div>
                                    </div>
                                </div>

                                <div class="card">
                                    <div class="card-body" style="text-align: center;">
                                        <div style="font-size: 2.5rem; font-weight: 700; color: var(--warning-color); margin-bottom: 0.5rem;">
                                            85
                                        </div>
                                        <div style="color: var(--gray);">Rata-rata Nilai</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="content-section">
                            <h4 class="mb-3">‚ÑπÔ∏è Informasi Akun</h4>
                            <p style="font-size: 0.875rem; color: var(--gray);">
                                <strong>Bergabung sejak:</strong><br>
                                1 Januari 2025
                            </p>
                            <p style="font-size: 0.875rem; color: var(--gray);">
                                <strong>Terakhir login:</strong><br>
                                Hari ini, 14:30
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p>Menyimpan...</p>
    </div>

    <script src="../assets/js/validation.js"></script>
    <script src="../assets/js/ui-interactions.js"></script>
    <script>
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('sidebar');
        const profileForm = document.getElementById('profileForm');
        const passwordForm = document.getElementById('passwordForm');

        sidebarToggle.addEventListener('click', function() {
            sidebar.classList.toggle('active');
        });

        // Profile Form Submit
        profileForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            document.getElementById('loadingOverlay').classList.add('show');
            
            setTimeout(() => {
                document.getElementById('loadingOverlay').classList.remove('show');
                document.getElementById('alertContainer').innerHTML = `
                    <div class="alert alert-success">
                        ‚úì Profil berhasil diperbarui!
                    </div>
                `;
            }, 1000);

            // INTEGRATION NOTE for Juan:
            // Add actual backend call here
        });

        // Password Form Submit
        passwordForm.addEventListener('submit', function(e) {
            e.preventDefault();

            const newPassword = document.getElementById('newPassword').value;
            const confirmNewPassword = document.getElementById('confirmNewPassword').value;

            if (!validatePassword(newPassword, 'newPasswordError')) {
                return;
            }

            if (!validatePasswordMatch(newPassword, confirmNewPassword, 'confirmNewPasswordError')) {
                return;
            }

            document.getElementById('loadingOverlay').classList.add('show');

            setTimeout(() => {
                document.getElementById('loadingOverlay').classList.remove('show');
                document.getElementById('passwordAlertContainer').innerHTML = `
                    <div class="alert alert-success">
                        ‚úì Password berhasil diubah!
                    </div>
                `;
                passwordForm.reset();
            }, 1000);

            // INTEGRATION NOTE for Juan:
            // Add actual backend call here
        });

        function logout() {
            if (confirm('Apakah Anda yakin ingin logout?')) {
                window.location.href = '../pages/login.html';
            }
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail Kelas - KelasOnline</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-graduation-cap"></i>
                <span>KelasOnline</span>
            </div>
            <div class="nav-menu">
                <a href="dashboard-dosen.html" class="nav-link">
                    <i class="fas fa-home"></i> Dashboard
                </a>
                <a href="kelas-dosen.html" class="nav-link active">
                    <i class="fas fa-chalkboard"></i> Kelas Saya
                </a>
                <a href="#" class="nav-link">
                    <i class="fas fa-bell"></i>
                    <span class="badge">3</span>
                </a>
                <div class="nav-profile">
                    <img src="https://ui-avatars.com/api/?name=Dosen&background=2563EB&color=fff" alt="Profile">
                    <div class="profile-dropdown">
                        <a href="profil-dosen.html"><i class="fas fa-user"></i> Profil</a>
                        <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="dashboard-container">
        <!-- Breadcrumb -->
        <div class="breadcrumb">
            <a href="dashboard-dosen.html"><i class="fas fa-home"></i> Dashboard</a>
            <span>/</span>
            <a href="kelas-dosen.html">Kelas Saya</a>
            <span>/</span>
            <span class="active">Detail Kelas</span>
        </div>

        <!-- Kelas Header -->
        <section class="kelas-detail-header glass-effect">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="kelas-title">Pemrograman Web</h1>
                    <div class="kelas-meta">
                        <span class="badge-info"><i class="fas fa-code"></i> PWB001</span>
                        <span class="badge-info"><i class="fas fa-calendar"></i> Semester 5</span>
                        <span class="badge-info"><i class="fas fa-calendar-alt"></i> 2024/2025</span>
                    </div>
                    <p class="kelas-description">Mata kuliah yang membahas tentang pengembangan aplikasi web menggunakan HTML, CSS, JavaScript, PHP, dan MySQL.</p>
                </div>
                <div class="header-right">
                    <div class="kelas-kode-section">
                        <label>Kode Kelas:</label>
                        <div class="kode-display">
                            <span class="kode-text" id="kodeKelas">ABC123</span>
                            <button class="btn-copy" onclick="copyKode()">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <small><i class="fas fa-info-circle"></i> Bagikan kode ini ke mahasiswa</small>
                    </div>
                    <div class="header-actions">
                        <button class="btn-secondary" onclick="editKelas()">
                            <i class="fas fa-edit"></i> Edit Kelas
                        </button>
                        <button class="btn-danger" onclick="deleteKelas()">
                            <i class="fas fa-trash"></i> Hapus
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Statistics Cards -->
        <section class="stats-grid">
            <div class="stat-card glass-effect" style="--accent-color: #10B981;">
                <div class="stat-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-content">
                    <h3 class="stat-number" id="totalMahasiswa">32</h3>
                    <p class="stat-label">Mahasiswa Terdaftar</p>
                </div>
            </div>

            <div class="stat-card glass-effect" style="--accent-color: #3B82F6;">
                <div class="stat-icon">
                    <i class="fas fa-book"></i>
                </div>
                <div class="stat-content">
                    <h3 class="stat-number" id="totalMateri">8</h3>
                    <p class="stat-label">Total Materi</p>
                </div>
            </div>

            <div class="stat-card glass-effect" style="--accent-color: #F59E0B;">
                <div class="stat-icon">
                    <i class="fas fa-tasks"></i>
                </div>
                <div class="stat-content">
                    <h3 class="stat-number" id="totalTugas">5</h3>
                    <p class="stat-label">Total Tugas</p>
                </div>
            </div>

            <div class="stat-card glass-effect" style="--accent-color: #8B5CF6;">
                <div class="stat-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stat-content">
                    <h3 class="stat-number">85%</h3>
                    <p class="stat-label">Rata-rata Nilai</p>
                </div>
            </div>
        </section>

        <!-- Tabs Navigation -->
        <div class="tabs-container glass-effect">
            <div class="tabs-nav">
                <button class="tab-button active" data-tab="info" onclick="switchTab('info')">
                    <i class="fas fa-info-circle"></i> Informasi
                </button>
                <button class="tab-button" data-tab="mahasiswa" onclick="switchTab('mahasiswa')">
                    <i class="fas fa-users"></i> Mahasiswa (32)
                </button>
                <button class="tab-button" data-tab="materi" onclick="switchTab('materi')">
                    <i class="fas fa-book"></i> Materi (8)
                </button>
                <button class="tab-button" data-tab="tugas" onclick="switchTab('tugas')">
                    <i class="fas fa-tasks"></i> Tugas (5)
                </button>
            </div>

            <!-- Tab Content -->
            <div class="tabs-content">
                <!-- Tab: Informasi -->
                <div id="tab-info" class="tab-pane active">
                    <div class="info-grid">
                        <div class="info-card">
                            <h3><i class="fas fa-info-circle"></i> Detail Kelas</h3>
                            <table class="info-table">
                                <tr>
                                    <td>Nama Mata Kuliah</td>
                                    <td><strong>Pemrograman Web</strong></td>
                                </tr>
                                <tr>
                                    <td>Kode Mata Kuliah</td>
                                    <td><strong>PWB001</strong></td>
                                </tr>
                                <tr>
                                    <td>Semester</td>
                                    <td><strong>5</strong></td>
                                </tr>
                                <tr>
                                    <td>Tahun Ajaran</td>
                                    <td><strong>2024/2025</strong></td>
                                </tr>
                                <tr>
                                    <td>Kapasitas</td>
                                    <td><strong>32 / 40 Mahasiswa</strong></td>
                                </tr>
                                <tr>
                                    <td>Kode Kelas</td>
                                    <td><strong class="text-primary">ABC123</strong></td>
                                </tr>
                            </table>
                        </div>

                        <div class="info-card">
                            <h3><i class="fas fa-chart-pie"></i> Statistik</h3>
                            <div class="progress-list">
                                <div class="progress-item">
                                    <label>Kehadiran Rata-rata</label>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 88%;"></div>
                                        <span class="progress-label">88%</span>
                                    </div>
                                </div>
                                <div class="progress-item">
                                    <label>Tugas Terkirim</label>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 75%;"></div>
                                        <span class="progress-label">75%</span>
                                    </div>
                                </div>
                                <div class="progress-item">
                                    <label>Nilai Rata-rata</label>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 85%;"></div>
                                        <span class="progress-label">85%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Mahasiswa -->
                <div id="tab-mahasiswa" class="tab-pane">
                    <div class="section-header">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Cari mahasiswa..." id="searchMahasiswa" onkeyup="searchMahasiswa()">
                        </div>
                        <button class="btn-primary" onclick="exportMahasiswa()">
                            <i class="fas fa-download"></i> Export Excel
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table" id="tableMahasiswa">
                            <thead>
                                <tr>
                                    <th>No</th>
                                    <th>NPM</th>
                                    <th>Nama</th>
                                    <th>Email</th>
                                    <th>Bergabung</th>
                                    <th>Status</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>2217051001</td>
                                    <td>
                                        <div class="user-info">
                                            <img src="https://ui-avatars.com/api/?name=Andi+Pratama&background=3B82F6&color=fff" alt="Avatar">
                                            <span>Andi Pratama</span>
                                        </div>
                                    </td>
                                    <td>andi@student.unila.ac.id</td>
                                    <td>01 Sep 2024</td>
                                    <td><span class="badge badge-success">Aktif</span></td>
                                    <td>
                                        <button class="btn-sm btn-info" onclick="viewProgress(1)">
                                            <i class="fas fa-chart-line"></i>
                                        </button>
                                        <button class="btn-sm btn-danger" onclick="removeMahasiswa(1)">
                                            <i class="fas fa-user-times"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>2217051002</td>
                                    <td>
                                        <div class="user-info">
                                            <img src="https://ui-avatars.com/api/?name=Siti+Rahma&background=10B981&color=fff" alt="Avatar">
                                            <span>Siti Rahma</span>
                                        </div>
                                    </td>
                                    <td>siti@student.unila.ac.id</td>
                                    <td>01 Sep 2024</td>
                                    <td><span class="badge badge-success">Aktif</span></td>
                                    <td>
                                        <button class="btn-sm btn-info" onclick="viewProgress(2)">
                                            <i class="fas fa-chart-line"></i>
                                        </button>
                                        <button class="btn-sm btn-danger" onclick="removeMahasiswa(2)">
                                            <i class="fas fa-user-times"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>2217051003</td>
                                    <td>
                                        <div class="user-info">
                                            <img src="https://ui-avatars.com/api/?name=Budi+Santoso&background=F59E0B&color=fff" alt="Avatar">
                                            <span>Budi Santoso</span>
                                        </div>
                                    </td>
                                    <td>budi@student.unila.ac.id</td>
                                    <td>02 Sep 2024</td>
                                    <td><span class="badge badge-success">Aktif</span></td>
                                    <td>
                                        <button class="btn-sm btn-info" onclick="viewProgress(3)">
                                            <i class="fas fa-chart-line"></i>
                                        </button>
                                        <button class="btn-sm btn-danger" onclick="removeMahasiswa(3)">
                                            <i class="fas fa-user-times"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Tab: Materi -->
                <div id="tab-materi" class="tab-pane">
                    <div class="section-header">
                        <h3><i class="fas fa-book"></i> Daftar Materi</h3>
                        <button class="btn-primary" onclick="window.location.href='kelola-materi.html'">
                            <i class="fas fa-plus"></i> Tambah Materi
                        </button>
                    </div>
                    <div class="materi-list">
                        <div class="materi-item glass-effect">
                            <div class="materi-icon">
                                <i class="fas fa-file-pdf"></i>
                            </div>
                            <div class="materi-content">
                                <h4>Pertemuan 1: Pengenalan HTML</h4>
                                <p>Materi dasar HTML5 dan struktur dokumen web</p>
                                <div class="materi-meta">
                                    <span><i class="fas fa-calendar"></i> 05 Sep 2024</span>
                                    <span><i class="fas fa-download"></i> 28 downloads</span>
                                </div>
                            </div>
                            <div class="materi-actions">
                                <button class="btn-sm btn-info" onclick="viewMateri(1)">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn-sm btn-primary" onclick="editMateri(1)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-sm btn-danger" onclick="deleteMateri(1)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>

                        <div class="materi-item glass-effect">
                            <div class="materi-icon video">
                                <i class="fas fa-video"></i>
                            </div>
                            <div class="materi-content">
                                <h4>Pertemuan 2: CSS Styling</h4>
                                <p>Video tutorial CSS dasar dan selectors</p>
                                <div class="materi-meta">
                                    <span><i class="fas fa-calendar"></i> 12 Sep 2024</span>
                                    <span><i class="fas fa-eye"></i> 25 views</span>
                                </div>
                            </div>
                            <div class="materi-actions">
                                <button class="btn-sm btn-info" onclick="viewMateri(2)">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn-sm btn-primary" onclick="editMateri(2)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-sm btn-danger" onclick="deleteMateri(2)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Tugas -->
                <div id="tab-tugas" class="tab-pane">
                    <div class="section-header">
                        <h3><i class="fas fa-tasks"></i> Daftar Tugas</h3>
                        <button class="btn-primary" onclick="window.location.href='kelola-tugas.html'">
                            <i class="fas fa-plus"></i> Buat Tugas
                        </button>
                    </div>
                    <div class="tugas-list">
                        <div class="tugas-item glass-effect">
                            <div class="tugas-header">
                                <h4>Tugas 1: Membuat Landing Page</h4>
                                <span class="badge badge-success">Aktif</span>
                            </div>
                            <p class="tugas-desc">Buat landing page sederhana menggunakan HTML dan CSS</p>
                            <div class="tugas-meta">
                                <span><i class="fas fa-calendar"></i> Deadline: 20 Sep 2024</span>
                                <span><i class="fas fa-upload"></i> 28/32 Terkirim</span>
                                <span><i class="fas fa-check-circle"></i> 15 Dinilai</span>
                            </div>
                            <div class="tugas-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 87.5%;"></div>
                                </div>
                                <span class="progress-label">87.5% submission</span>
                            </div>
                            <div class="tugas-actions">
                                <button class="btn-sm btn-info" onclick="viewSubmissions(1)">
                                    <i class="fas fa-file-alt"></i> Lihat Submission
                                </button>
                                <button class="btn-sm btn-primary" onclick="editTugas(1)">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                                <button class="btn-sm btn-danger" onclick="deleteTugas(1)">
                                    <i class="fas fa-trash"></i> Hapus
                                </button>
                            </div>
                        </div>

                        <div class="tugas-item glass-effect">
                            <div class="tugas-header">
                                <h4>Tugas 2: Form Validation dengan JavaScript</h4>
                                <span class="badge badge-warning">Deadline Soon</span>
                            </div>
                            <p class="tugas-desc">Implementasi validasi form menggunakan JavaScript</p>
                            <div class="tugas-meta">
                                <span><i class="fas fa-calendar"></i> Deadline: 25 Sep 2024</span>
                                <span><i class="fas fa-upload"></i> 20/32 Terkirim</span>
                                <span><i class="fas fa-check-circle"></i> 8 Dinilai</span>
                            </div>
                            <div class="tugas-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 62.5%;"></div>
                                </div>
                                <span class="progress-label">62.5% submission</span>
                            </div>
                            <div class="tugas-actions">
                                <button class="btn-sm btn-info" onclick="viewSubmissions(2)">
                                    <i class="fas fa-file-alt"></i> Lihat Submission
                                </button>
                                <button class="btn-sm btn-primary" onclick="editTugas(2)">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                                <button class="btn-sm btn-danger" onclick="deleteTugas(2)">
                                    <i class="fas fa-trash"></i> Hapus
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script src="../assets/js/validation.js"></script>
    <script src="../assets/js/ui-interactions.js"></script>
    <script>
        // Switch Tab
        function switchTab(tabName) {
            // Remove active class from all tabs
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            
            // Add active class to selected tab
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');
        }

        // Copy Kode Kelas
        function copyKode() {
            const kode = document.getElementById('kodeKelas').textContent;
            navigator.clipboard.writeText(kode).then(() => {
                showToast('Kode kelas berhasil disalin: ' + kode, 'success');
            });
        }

        // Edit Kelas
        function editKelas() {
            window.location.href = 'dashboard-dosen.html?edit=1';
        }

        // Delete Kelas
        function deleteKelas() {
            if (confirm('Apakah Anda yakin ingin menghapus kelas ini?\nSemua data terkait akan terhapus permanen!')) {
                // TODO: Call backend API
                showToast('Kelas berhasil dihapus', 'success');
                setTimeout(() => {
                    window.location.href = 'dashboard-dosen.html';
                }, 1500);
            }
        }

        // Search Mahasiswa
        function searchMahasiswa() {
            const input = document.getElementById('searchMahasiswa');
            const filter = input.value.toUpperCase();
            const table = document.getElementById('tableMahasiswa');
            const tr = table.getElementsByTagName('tr');
            
            for (let i = 1; i < tr.length; i++) {
                const td = tr[i].getElementsByTagName('td');
                let found = false;
                
                for (let j = 0; j < td.length; j++) {
                    if (td[j]) {
                        const txtValue = td[j].textContent || td[j].innerText;
                        if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            found = true;
                            break;
                        }
                    }
                }
                
                tr[i].style.display = found ? '' : 'none';
            }
        }

        // Export Mahasiswa
        function exportMahasiswa() {
            showToast('Export Excel sedang diproses...', 'info');
            // TODO: Implement export functionality
        }

        // View Progress
        function viewProgress(mahasiswaId) {
            window.location.href = `progress-mahasiswa.html?id=${mahasiswaId}`;
        }

        // Remove Mahasiswa
        function removeMahasiswa(mahasiswaId) {
            if (confirm('Apakah Anda yakin ingin mengeluarkan mahasiswa ini dari kelas?')) {
                // TODO: Call backend API
                showToast('Mahasiswa berhasil dikeluarkan', 'success');
                setTimeout(() => {
                    location.reload();
                }, 1500);
            }
        }

        // View/Edit/Delete Materi
        function viewMateri(id) {
            showToast('Membuka materi...', 'info');
        }

        function editMateri(id) {
            window.location.href = `kelola-materi.html?edit=${id}`;
        }

        function deleteMateri(id) {
            if (confirm('Hapus materi ini?')) {
                showToast('Materi berhasil dihapus', 'success');
                setTimeout(() => location.reload(), 1500);
            }
        }

        // View/Edit/Delete Tugas
        function viewSubmissions(id) {
            window.location.href = `lihat-submission.html?tugas=${id}`;
        }

        function editTugas(id) {
            window.location.href = `kelola-tugas.html?edit=${id}`;
        }

        function deleteTugas(id) {
            if (confirm('Hapus tugas ini? Semua submission akan terhapus!')) {
                showToast('Tugas berhasil dihapus', 'success');
                setTimeout(() => location.reload(), 1500);
            }
        }

        // Show Toast
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast toast-${type} active`;
            
            setTimeout(() => {
                toast.classList.remove('active');
            }, 3000);
        }

        // Logout
        function logout() {
            if (confirm('Apakah Anda yakin ingin logout?')) {
                window.location.href = 'login.html';
            }
        }

        // Load page data
        window.addEventListener('DOMContentLoaded', function() {
            // TODO: Load kelas data from backend
            // Get kelas ID from URL params
            const urlParams = new URLSearchParams(window.location.search);
            const kelasId = urlParams.get('id');
            
            console.log('Loading kelas detail:', kelasId);
        });
    </script>
</body>
</html>
